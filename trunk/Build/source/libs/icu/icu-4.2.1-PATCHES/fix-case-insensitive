#! /bin/sh
#
# On a case insensitive filesystem, e.g., in cygwin on a Win host, the
# header name "Features.h" conflicts with "features.h" of GNU libc.
#
# A logical replacement would be "LEFeatures.h", however, that would
# imply to install this header.
#
# Thus, this srcipt renames Features.h=>ICUFeatures.h and modifies
# all occurences of that filename accordingly.

file=`find -name Features.h`
test -n "$file" || exit

sed 's/__FEATURES_H/__ICUFEATURES_H/' $file >$file.tmp
touch -r $file $file.tmp
mv -f $file.tmp `echo $file | sed 's/Features.h/ICUFeatures.h/'`
rm -f $file


for file in `grep -rl 'Features\.h' .`; do
	sed 's/\([\\"]\)Features\.h/\1ICUFeatures.h/' $file >$file.tmp
	touch -r $file $file.tmp
	mv -f $file.tmp $file
done
