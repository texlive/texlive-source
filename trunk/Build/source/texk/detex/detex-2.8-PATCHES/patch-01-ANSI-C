diff -ur detex-2.8.orig/detex.l detex-2.8/detex.l
--- detex-2.8.orig/detex.l	2008-02-01 20:55:51.000000000 +0100
+++ detex-2.8/detex.l	2010-06-09 13:34:01.456409201 +0200
@@ -63,6 +63,21 @@
 #include <stdlib.h>
 #endif
 
+#undef IGNORE
+
+int BeginEnv(char *sbEnv);
+int EndEnv(char *sbEnv);
+void InputFile(char *sbFile);
+void IncludeFile(char *sbFile);
+void AddInclude(char *sbFile);
+void SetInputPaths(void);
+void SetEnvIgnore(char *sbEnvList);
+void Warning(char *sb1, char *sb2); 
+void ErrorExit(char *sb1);
+int SeparateList(char *sbList, char *rgsbList[] ,char chSep,int csbMax);
+int InList(char *sbFile);
+FILE * TexOpen(char *sbFile);
+
 #define	LaBEGIN		if (fLatex) BEGIN
 #define	IGNORE		if (fSpace && !fWord) putchar(' ')
 #define	SPACE		if (!fWord) putchar(' ')
@@ -72,7 +87,7 @@
 #define STRIPARGS(x)	cArgs=x; LaBEGIN LaMacro2
 #define	CITE(x)		if (fLatex && !fCite) KILLARGS(x)
 
-char	*SafeMalloc();
+char    *SafeMalloc(int cch, char *sbMessage);
 #ifndef NO_MALLOC_DECL
 char	*malloc();
 #endif
@@ -368,12 +383,10 @@
 **	If no input files are specified on the command line, process stdin.
 ******/
 
-main(cArgs,rgsbArgs)
-int	cArgs;
-char	*rgsbArgs[];
+int
+main(int cArgs, char *rgsbArgs[])
 {
 	char	*pch, *sbEnvList = DEFAULTENV, sbBadOpt[2];
-	FILE	*TexOpen();
 	int	fSawFile = 0, iArgs = 1;
 	
 	/* get base name and decide what we are doing, detex or delatex */
@@ -477,7 +490,8 @@
 **	return the termination signal for lex.
 ******/
 
-yywrap()
+int
+yywrap(void)
 {
 	(void)fclose(yyin);
 #ifdef FLEX_SCANNER
@@ -501,8 +515,8 @@
 **	a yyless routine
 ******/
 
-void yyless(n)
-int n;
+void
+yyless(int n)
 {
 	int 	i = strlen(yytext);
 
@@ -516,8 +530,8 @@
 **	sbEnvList.
 ******/
 
-SetEnvIgnore(sbEnvList)
-char	*sbEnvList;
+void
+SetEnvIgnore(char *sbEnvList)
 {
 	char *sb;
 
@@ -533,8 +547,8 @@
 **	is, sbCurrentEnv is set to sbEnv.
 ******/
 
-BeginEnv(sbEnv)
-char	*sbEnv;
+int
+BeginEnv(char *sbEnv)
 {
 	int	i;
 
@@ -551,8 +565,8 @@
 ** EndEnv -- checks to see if sbEnv is the current environment being ignored.
 ******/
 
-EndEnv(sbEnv)
-char	*sbEnv;
+int
+EndEnv(char *sbEnv)
 {
 	if (!fLatex) return(0);
 	if (strcmp(sbEnv, sbCurrentEnv) == 0)
@@ -565,11 +579,9 @@
 **	the sbFile is ignored.
 ******/
 
-InputFile(sbFile)
-char	*sbFile;
+void
+InputFile(char *sbFile)
 {
-	FILE	*TexOpen();
-
 	if (!fFollow)
 	    return;
 	rgfp[cfp++] = yyin;
@@ -589,11 +601,9 @@
 **	and open sbFile.  If the open fails, the sbFile is ignored.
 ******/
 
-IncludeFile(sbFile)
-char	*sbFile;
+void
+IncludeFile(char *sbFile)
 {
-	FILE	*TexOpen();
-
 	if (!fFollow)
 	    return;
 	if (!InList(sbFile))
@@ -615,8 +625,8 @@
 **	If the include list is too long, sbFile is ignored.
 ******/
 
-AddInclude(sbFile)
-char	*sbFile;
+void
+AddInclude(char *sbFile)
 {
 	if (!fFollow)
 	    return;
@@ -631,8 +641,8 @@
 **	no list, all files are assumed to be "in the list".
 ******/
 
-InList(sbFile)
-char	*sbFile;
+int
+InList(char *sbFile)
 {
 	char	*pch, sbBase[MAXPATHLEN];
 	int	i;
@@ -658,7 +668,8 @@
 **	routine does not honor the '//' construct (expand subdirs).
 ******/
 
-SetInputPaths()
+void
+SetInputPaths(void)
 {
 	char *sb, *sbPaths, *getenv();
 	int cchDefaults, cchPaths;
@@ -698,9 +709,8 @@
 **	ERROR is returned if there are more than csbMax words.
 ******/
 
-SeparateList(sbList, rgsbList, chSep, csbMax)
-char	*sbList, *rgsbList[], chSep;
-int	csbMax;
+int
+SeparateList(char *sbList, char *rgsbList[], char chSep, int csbMax)
 {
 	int	csbList = 0;
 
@@ -725,8 +735,7 @@
 ******/
 
 FILE *
-TexOpen(sbFile)
-char	*sbFile;
+TexOpen(char *sbFile)
 {
 	char	*pch, *sbNew;
 	FILE	*fp;
@@ -784,9 +793,7 @@
 ******/
 
 char *
-SafeMalloc(cch, sbMessage)
-int cch;
-char *sbMessage;
+SafeMalloc(int cch, char *sbMessage)
 {
 	char *sb;
 
@@ -799,8 +806,8 @@
 ** Warning -- print a warning message preceded by the program name.
 ******/
 
-Warning(sb1, sb2)
-char	*sb1, *sb2;
+void
+Warning(char *sb1, char *sb2)
 {
 	(void)fprintf(stderr, "%s: warning: %s %s\n", sbProgName, sb1, sb2);
 }
@@ -810,8 +817,8 @@
 **	Stdout is flushed and detex exits.
 ******/
 
-ErrorExit(sb1)
-char	*sb1;
+void
+ErrorExit(char *sb1)
 {
 	(void)fflush(stdout);
 	(void)fprintf(stderr, "%s: error: %s\n", sbProgName, sb1);
@@ -823,7 +830,8 @@
 ** OS2UsageExit -- print OS/2 usage message and exit.
 ******/
 
-OS2UsageExit()
+void
+OS2UsageExit(void)
 {
 	(void)printf("\n%s [ -clnstw ] [ -e environment-list ] [ filename[.tex] ... ]\n",
 		sbProgName);
