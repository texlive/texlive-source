#! /bin/sh

# Copyright (C) 2014 Peter Breitenlohner <tex-live@tug.org>
# You may freely use, modify and/or distribute this file.

tests=omegaware/tests

test -d $tests || mkdir -p $tests

TEXMFCNF=$srcdir/../kpathsea
OFMFONTS=".;./$tests"
export TEXMFCNF OFMFONTS

echo && echo "*** pltotf arabicr yarabicr"
./pltotf $srcdir/$tests/arabicr $tests/yarabicr || exit 1

echo && echo "*** opl2ofm arabicr.pl zyarabicr"
./wopl2ofm $srcdir/$tests/arabicr.pl $tests/zyarabicr || exit 1

echo && echo "*** cmp yarabicr.tfm zyarabicr.ofm"
cmp $tests/yarabicr.tfm $tests/zyarabicr.ofm || exit 1 

echo && echo "*** ofm2opl yarabicr.tfm xyarabicr"
./wofm2opl $tests/yarabicr.tfm $tests/xyarabicr || exit 1

echo && echo "*** ofm2opl zyarabicr zyarabicr"
./wofm2opl $tests/zyarabicr $tests/zyarabicr || exit 1

echo && echo "*** diff xyarabicr.opl zyarabicr.opl"
diff $tests/xyarabicr.opl $tests/zyarabicr.opl || exit 1

echo && echo "*** ovp2ovf arabic yarabic yarabic"
./wovp2ovf $srcdir/$tests/arabic $tests/yarabic $tests/yarabic || exit 1

echo && echo "*** ofm2opl yarabic.tfm xyarabic"
omegafonts/omfonts -ofm2opl $tests/yarabic $tests/xyarabic || exit 1

echo && echo "*** ofm2opl yarabic.tfm xyarabic"
./wofm2opl $tests/yarabic $tests/xyarabic || exit 77

exit 0
#***************************

diff $srcdir/$tests/Cherokee.pl $tests/xCherokee.pl || exit 1

  ./wovp2ovf $srcdir/$tests/OCherokee $tests/OCherokee $tests/OCherokee || exit 1

  ./wofm2opl $tests/OCherokee $tests/OCherokee || exit 1

  ./wopl2ofm $tests/OCherokee $tests/xOCherokee || exit 1

  ./wofm2opl $tests/xOCherokee $tests/xOCherokee || exit 1

diff $tests/OCherokee.opl $tests/xOCherokee.opl || exit 1

  ./wovf2ovp $tests/OCherokee $tests/OCherokee $tests/xOCherokee || exit 1

diff $srcdir/$tests/OCherokee.ovp $tests/xOCherokee.ovp || exit 1

