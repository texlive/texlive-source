#! /bin/sh

# Copyright (C) 2013 Peter Breitenlohner <tex-live@tug.org>
# You may freely use, modify and/or distribute this file.

test -d uptests || mkdir -p uptests

# Test inputs
testdir=$srcdir/uptexdir/tests

# Testing pPLtoTF/pTFtoPL for min10 (yoko=horiz) and tmin10 (tate=vert).
for font in min10 tmin10; do

  ./uppltotf -verbose $testdir/$font.pl uptests/x$font.tfm && \
    cmp $testdir/$font.tfm uptests/x$font.tfm || exit 1

  TEXMFCNF=$srcdir/../kpathsea \
    ./uptftopl -charcode-format octal -verbose $testdir/$font.tfm uptests/x$font.pl || exit 1

  ./uppltotf uptests/x$font uptests/xx$font && \
    cmp $testdir/$font.tfm uptests/xx$font.tfm || exit 1

  TEXMFCNF=$srcdir/../kpathsea TFMFONTS=uptests \
    ./uptftopl -charcode-format=octal xx$font uptests/xx$font && \
    diff uptests/x$font.pl uptests/xx$font.pl || exit 1

done

